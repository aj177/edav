{
    "contents" : "library(lattice)\nlibrary(plyr)\nlibrary(ggplot2)\n\n#SUCCESS METRICS\n# num of cycles\ndf = read.csv(\"~/Desktop/STAT_project/cyc.csv\")\n\n# replace NaN with mean for that group\nimpute.mean = function(x) replace(x, is.na(x), mean(x, na.rm = TRUE))\ndf_m <- ddply(df, ~ Year, transform, cyc_num = impute.mean(cyc_num))\ndf_m <- ddply(df, ~ Year, transform, singl_b = impute.mean(singl_b))\n\n#subset the dataframe on conditions\ndf_m_ND = subset(df, Donor==0)\ndf_m_ND$row.names = NULL\n\ndf_m_D= subset(df, Donor==1)\ndf_m_D$row.names = NULL\n\n\n\n#scatter plot [lattice]\ncyc_ND_age = xyplot (cyc_num ~ Age | factor(Year), df_m_ND, groups = Egg_Type, plot.points = FALSE, auto.key = TRUE)\ncyc_ND_age = update(cyc_ND_age, main=\"Number of cycles[Non Donor] by Egg Type\", ylab=\"Num of cycles\")\ncyc_ND_age = update(cyc_ND_age, type = c(\"p\", \"l\"))\nmytheme <- standard.theme(\"pdf\")\nmytheme$superpose.symbol$col <- c(\"magenta\",\"blue\")\nmytheme$superpose.line$col <- c(\"magenta\",\"blue\")\ncyc_ND_age = update(cyc_ND_age, par.settings=mytheme)\n\n#scatter plot [ggplot]\ncyc_D_age = ggplot(df_m_D, aes(Year, cyc_num)) + geom_smooth(method = \"lm\") + geom_point(aes(colour=Egg_Type)) + facet_grid(~Egg_Type) \ncyc_D_age + ylab(\"Num of cycles\")\ncyc_D_age + ggtitle(title=\"Number of cycles[Donor] by Egg Type\")\n\n\n# singleton live births by Age group [ggplot]\n#lB_ND_age = ggplot(df_ND, aes(Age, singl_b)) + geom_smooth(method = \"lm\") + geom_point(aes(colour=Egg_Type)) + facet_grid(~Year) \n#lB_ND_age + ylab(\"Num of singleton children\")\n\nlB_ND_age = ggplot(df_m_ND, aes(Age, singl_b)) + geom_violin(aes(fill = Egg_Type), scale=\"width\")+ facet_wrap(~Year, nrow=3) \nlB_ND_age + ylab(\"Num of singleton children\")\n\n\n#singleton live birth rate\ndf = read.csv(\"~/Desktop/STAT_project/sLB.csv\")\n\n#subset the dataframe on conditions\ndf_ND = subset(df, Donor ==0)\ndf_ND$row.names = NULL\n\n#kernel density plot\n#sLB = densityplot (~ B_rate | factor(Donor), df, groups = Egg_Type, plot.points = FALSE, auto.key = TRUE)\n\n#scatter plot\ns_ND_age = xyplot (B_rate~Age | factor(Year), df_ND, groups = Egg_Type, plot.points = FALSE, auto.key = TRUE)\ns_ND_age = update(s_ND_age, main=\"Singleton Live Birth rate[Non Donor] by Egg Type\", ylab=\"Birth rate\")\ns_ND_age = update(s_ND_age, type = c(\"p\", \"l\"))\n\n\n\n#SURVEILLANCE METRICS\ndf = read.csv(\"~/Desktop/STAT_project/surveil.csv\")\n\n# replace NaN with mean for that group\nimpute.mean = function(x) replace(x, is.na(x), mean(x, na.rm = TRUE))\ndf_m <- ddply(df, ~ Year, transform, value = impute.mean(value))\n\n# surveillance metric by Year, by Age\nsurveil_ND_age = xyplot (value~Age | factor(Year), df_m, groups = Metric, plot.points = FALSE, auto.key = TRUE)\nsurveil_ND_age = update(mul_ND_age, main=\"Surveillance metric for fresh Non Donor eggs\", ylab=\"Birth rate[%]\")\nsurveil_ND_age = update(mul_ND_age, type = c(\"p\", \"l\"))\nmytheme <- standard.theme(\"pdf\")\nmytheme$superpose.symbol$col <- c(\"red\",\"dark green\")\nmytheme$superpose.line$col <- c(\"red\",\"dark green\")\nsurveil_ND_age = update(surveil_ND_age, par.settings=mytheme)\n",
    "created" : 1398637519814.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1812493718",
    "id" : "61114C3B",
    "lastKnownWriteTime" : 1398666736,
    "path" : "~/Desktop/STAT_project/STAT_W4701_proj_R/latt_plot.R",
    "project_path" : "latt_plot.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}